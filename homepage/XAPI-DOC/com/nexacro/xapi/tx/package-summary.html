<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_19) on Tue May 30 13:12:30 KST 2017 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
com.nexacro.xapi.tx (nexacro X-API v1.0)
</TITLE>

<META NAME="keywords" CONTENT="com.nexacro.xapi.tx package">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="com.nexacro.xapi.tx (nexacro X-API v1.0)";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/nexacro/xapi/data/datatype/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/nexacro/xapi/tx/impl/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package com.nexacro.xapi.tx
</H2>
X-API의 데이터 통신을 수행한다.
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/DataDeserializer.html" title="interface in com.nexacro.xapi.tx">DataDeserializer</A></B></TD>
<TD><code>InputStream</code> 또는 <code>Reader</code>로부터 특정 형식의
 데이터(stream)를 읽고, <code>PlatformData</code>으로 변환한다.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/DataSerializer.html" title="interface in com.nexacro.xapi.tx">DataSerializer</A></B></TD>
<TD><code>PlatformData</code>를 특정 형식으로 변환하여 <code>OutputStream</code>
 또는 <code>Writer</code>으로 출력한다.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/DataTypeChanger.html" title="interface in com.nexacro.xapi.tx">DataTypeChanger</A></B></TD>
<TD><code>DataSet</code> 열(column)의 데이터 형식(dataType)을 송수신을 위한
 데이터 형식(dataType)으로 변경한다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/JavaTypeDataConverter.html" title="interface in com.nexacro.xapi.tx">JavaTypeDataConverter</A></B></TD>
<TD>Java 기본 형식의 데이터를 다른 형식의 데이터로 변환한다.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/JavaTypeDataSerializer.html" title="interface in com.nexacro.xapi.tx">JavaTypeDataSerializer</A></B></TD>
<TD><code>Variable</code>과 <code>DataSet</code>을 특정 형식으로 변환하여
 <code>OutputStream</code> 또는 <code>Writer</code>으로 출력한다.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/PartDataSerializer.html" title="interface in com.nexacro.xapi.tx">PartDataSerializer</A></B></TD>
<TD><code>Variable</code>과 <code>DataSet</code>을 특정 형식으로 변환하여
 <code>OutputStream</code> 또는 <code>Writer</code>으로 출력한다.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/PlatformType.html" title="interface in com.nexacro.xapi.tx">PlatformType</A></B></TD>
<TD>Platform의 송수신 형식(contentType), 프로토콜 형식(protocolType)과
 HTTP의 ContentType 등의 상수를 정의한다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/ProtocolDecoder.html" title="interface in com.nexacro.xapi.tx">ProtocolDecoder</A></B></TD>
<TD><code>InputStream</code> 또는 <code>Reader</code>으로부터 읽은 데이터(stream)의
 압축 해제, 복호화등을 수행한다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/ProtocolEncoder.html" title="interface in com.nexacro.xapi.tx">ProtocolEncoder</A></B></TD>
<TD><code>OutputStream</code> 또는 <code>Writer</code>으로 데이터(stream)의
 압축, 암호화등을 수행한 후 출력한다.

 </TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Class Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/DataSerializerFactory.html" title="class in com.nexacro.xapi.tx">DataSerializerFactory</A></B></TD>
<TD><code>PlatformData</code>를 특정 형식의 데이터(stream)으로 변환 또는 원복을
 수행하는 <code>DataSerializer</code>와 <code>DataDeserializer</code>를 생성한다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/DefaultJavaTypeDataConverter.html" title="class in com.nexacro.xapi.tx">DefaultJavaTypeDataConverter</A></B></TD>
<TD>Java 기본 형식의 데이터를 다른 형식의 데이터로 변환하는
 <code>JavaTypeDataConverter</code>의 기본 구현체이다.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/HttpJavaTypePlatformResponse.html" title="class in com.nexacro.xapi.tx">HttpJavaTypePlatformResponse</A></B></TD>
<TD>HTTP 응답으로 데이터(<code>Variable</code>과 <code>DataSet</code>)를 송신한다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/HttpPartPlatformResponse.html" title="class in com.nexacro.xapi.tx">HttpPartPlatformResponse</A></B></TD>
<TD>HTTP 응답으로 데이터(<code>Variable</code>과 <code>DataSet</code>)를 송신한다.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/HttpPlatformRequest.html" title="class in com.nexacro.xapi.tx">HttpPlatformRequest</A></B></TD>
<TD>HTTP 요청으로부터 데이터(<code>PlatformData</code>)를 수신받는다.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/HttpPlatformResponse.html" title="class in com.nexacro.xapi.tx">HttpPlatformResponse</A></B></TD>
<TD>HTTP 응답으로 데이터(<code>PlatformData</code>)를 송신한다.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/JavaTypeDataSerializerFactory.html" title="class in com.nexacro.xapi.tx">JavaTypeDataSerializerFactory</A></B></TD>
<TD><code>Variable</code>과 <code>DataSet</code>을 특정 형식의 데이터(stream)으로 변환을
 수행하는 <code>JavaTypeDataSerializer</code>를 생성한다.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/JavaTypePlatformResponse.html" title="class in com.nexacro.xapi.tx">JavaTypePlatformResponse</A></B></TD>
<TD><code>OutputStream</code> 또는 <code>Writer</code>으로
 데이터(<code>Variable</code>과 <code>DataSet</code>)를 송신한다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/PartPlatformResponse.html" title="class in com.nexacro.xapi.tx">PartPlatformResponse</A></B></TD>
<TD><code>OutputStream</code> 또는 <code>Writer</code>으로
 데이터(<code>Variable</code>과 <code>DataSet</code>)를 송신한다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/PlatformFileClient.html" title="class in com.nexacro.xapi.tx">PlatformFileClient</A></B></TD>
<TD>파일으로 데이터(<code>PlatformData</code>)를 저장하고, 파일로부터
 데이터(<code>PlatformData</code>)를 적재한다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/PlatformHttpClient.html" title="class in com.nexacro.xapi.tx">PlatformHttpClient</A></B></TD>
<TD>HTTP 통신으로 데이터(<code>PlatformData</code>)를 송수신한다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/PlatformRequest.html" title="class in com.nexacro.xapi.tx">PlatformRequest</A></B></TD>
<TD><code>InputStream</code> 또는 <code>Reader</code>로부터
 데이터(<code>PlatformData</code>)를 수신받는다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/PlatformResponse.html" title="class in com.nexacro.xapi.tx">PlatformResponse</A></B></TD>
<TD><code>OutputStream</code> 또는 <code>Writer</code>으로
 데이터(<code>PlatformData</code>)를 송신한다.

 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/PlatformUtils.html" title="class in com.nexacro.xapi.tx">PlatformUtils</A></B></TD>
<TD>X-API를 위한 내부 클래스이며, Platform에 관련된 유용한 함수들의 집합이다.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/ProtocolFilterFactory.html" title="class in com.nexacro.xapi.tx">ProtocolFilterFactory</A></B></TD>
<TD>입출력 데이터(stream)의 압축, 암호화등의 변형을 수행하는
 <code>ProtocolEncoder</code>와 <code>ProtocolDecoder</code>를 생성한다.

 </TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Exception Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../com/nexacro/xapi/tx/PlatformException.html" title="class in com.nexacro.xapi.tx">PlatformException</A></B></TD>
<TD>Platform의 예외를 의미하는 <code>Exception</code>이다.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package com.nexacro.xapi.tx Description
</H2>

<P>
<p>X-API의 데이터 통신을 수행한다.</p>
<p>nexacro platform 또는 <code>PlatformData</code>를 이용하는 모든 클라이언트와 데이터 송수신을 수행한다.
데이터 통신의 대부분의 경우 HTTP 상에서 수행되며, XML 등의 형식으로 변환된 후 송수신된다. 주요 클래스는
<a href="HttpPlatformRequest.html"><code>HttpPlatformRequest</code></a>,
<a href="HttpPlatformResponse.html"><code>HttpPlatformResponse</code></a> 등이다.</p>

<br><br>
<a name="doc.Description"></a>
<div align="left">
<ol>
<li><a href="#doc.Overview">시작하기</a></li>
<li><a href="#doc.DataTransaction">데이터 송수신</a></li>
<li><a href="#doc.TransactionFlow">데이터 송수신의 내부 흐름</a></li>
<li><a href="#doc.TransactionHttpServer">Server 상의 HTTP 데이터 통신</a></li>
<li><a href="#doc.TransactionHttpClient">Client 상의 HTTP 데이터 통신</a></li>
<li><a href="#doc.ContentType">데이터 송수신 형식</a></li>
<li><a href="#doc.ProtocolType">데이터 프로토콜 형식</a></li>
<li><a href="#doc.PartResponse">데이터 분할 송신</a></li>
<li><a href="#doc.HttpGetParameter">HTTP GET 방식의 데이터</a></li>
<li><a href="#doc.FileUpload">파일 업로드</a></li>
<li><a href="#doc.FileDownload">파일 다운로드</a></li>
<li><a href="#doc.TransactionIo"><code>Stream</code>을 이용한 데이터 통신</a></li>
<li><a href="#doc.DataFileIo">파일로부터의 데이터 적재와 저장</a></li>
<li><a href="#doc.DataToXml"><code>PlatformData</code>를 XML 문자열로 변환</a></li>
<li><a href="#doc.TransactionCrud">추가, 변경, 삭제된 데이터 송신</a></li>
<li><a href="#doc.StreamLog"><code>StreamLog</code>를 이용한 송수신 데이터(stream) 저장</a></li>
<li><a href="#doc.LocalTest">localhost 테스트</a></li>
<li><a href="#doc.Logging">X-API의 내부 로그 출력하기</a></li>
<li><a href="#doc.NullChar">데이터에 포함된 null 문자(0x00) 오류</a></li>
<li><a href="#doc.IllegalStateException">JSP에서 데이터 전송시의 java.lang.IllegalStateException 예외</a></li>
</ol>
</div>

<a name="doc.Overview"></a>
<h3>1. 시작하기</h3>

<p>다음은 X-API을 이용하여 데이터를 송수신하는 간단한 JSP 예제이다.</p>

<div align="left">
<table border="2" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.data.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.tx.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;contentType=</font><font color="#2a00ff">&#34;text/xml;&nbsp;charset=UTF-8&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><br />

<font color="#3f7f5f">//&nbsp;버퍼(buffer)&nbsp;초기화</font><br />
<font color="#000000">out.clearBuffer</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />

<font color="#3f7f5f">//&nbsp;HttpServletRequest를&nbsp;이용하여&nbsp;HttpPlatformRequest&nbsp;생성</font><br />
<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;수신받은&nbsp;데이터&nbsp;획득</font><br />
<font color="#000000">PlatformData&nbsp;reqData&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#000000">VariableList&nbsp;reqVarList&nbsp;=&nbsp;reqData.getVariableList</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;부서명&nbsp;획득</font><br />
<font color="#000000">String&nbsp;name&nbsp;=&nbsp;reqVarList.getString</font><font color="#000000">(</font><font color="#2a00ff">&#34;name&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;송신할&nbsp;데이터&nbsp;생성</font><br />
<font color="#000000">PlatformData&nbsp;resData&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">VariableList&nbsp;resVarList&nbsp;=&nbsp;resData.getVariableList</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;부서별&nbsp;인원을&nbsp;저장할&nbsp;DataSet&nbsp;생성</font><br />
<font color="#000000">DataSet&nbsp;employees&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">DataSet</font><font color="#000000">(</font><font color="#2a00ff">&#34;employees&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;DataSet에&nbsp;열(column)&nbsp;추가</font><br />
<font color="#000000">employees.addColumn</font><font color="#000000">(</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">ColumnHeader</font><font color="#000000">(</font><font color="#2a00ff">&#34;name&#34;</font><font color="#000000">,&nbsp;DataTypes.STRING,&nbsp;</font><font color="#990000">8</font><font color="#000000">))</font><font color="#000000">;</font><br />

<font color="#000000">employees.addColumn</font><font color="#000000">(</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">ColumnHeader</font><font color="#000000">(</font><font color="#2a00ff">&#34;jobTitle&#34;</font><font color="#000000">,&nbsp;DataTypes.STRING</font><font color="#000000">))</font><font color="#000000">;</font><br />
<font color="#000000">employees.addColumn</font><font color="#000000">(</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">ColumnHeader</font><font color="#000000">(</font><font color="#2a00ff">&#34;number&#34;</font><font color="#000000">,&nbsp;DataTypes.INT</font><font color="#000000">))</font><font color="#000000">;</font><br />

<font color="#000000">employees.addColumn</font><font color="#000000">(</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">ColumnHeader</font><font color="#000000">(</font><font color="#2a00ff">&#34;manager&#34;</font><font color="#000000">,&nbsp;DataTypes.BOOLEAN</font><font color="#000000">))</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;부서별&nbsp;인원&nbsp;데이터&nbsp;추가</font><br />

<font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">(</font><font color="#2a00ff">&#34;R&amp;D&nbsp;Center&#34;</font><font color="#000000">.equals</font><font color="#000000">(</font><font color="#000000">name</font><font color="#000000">))&nbsp;{</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;행(row)&nbsp;추가</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">row&nbsp;=&nbsp;employees.newRow</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;추가된&nbsp;행(row)의&nbsp;데이터&nbsp;설정</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">employees.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;name&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;John&nbsp;Jones&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">employees.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;jobTitle&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;developer&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">employees.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;number&#34;</font><font color="#000000">,&nbsp;</font><font color="#990000">1234</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">employees.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;manager&#34;</font><font color="#000000">,&nbsp;</font><font color="#7f0055"><b>false</b></font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;...</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;정상&nbsp;수행</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">resData.addDataSet</font><font color="#000000">(</font><font color="#000000">employees</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">resVarList.add</font><font color="#000000">(</font><font color="#2a00ff">&#34;ERROR_CODE&#34;</font><font color="#000000">,&nbsp;</font><font color="#990000">200</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">}&nbsp;</font><font color="#7f0055"><b>else&nbsp;if&nbsp;</b></font><font color="#000000">(</font><font color="#2a00ff">&#34;Quality&nbsp;Assurance&#34;</font><font color="#000000">.equals</font><font color="#000000">(</font><font color="#000000">name</font><font color="#000000">))&nbsp;{</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;행(row)&nbsp;추가</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">row&nbsp;=&nbsp;employees.newRow</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;추가된&nbsp;행(row)의&nbsp;데이터&nbsp;설정</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">employees.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;name&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;Tom&nbsp;Glover&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">employees.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;jobTitle&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;manager&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">employees.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;number&#34;</font><font color="#000000">,&nbsp;</font><font color="#990000">9876</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">employees.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;manager&#34;</font><font color="#000000">,&nbsp;</font><font color="#7f0055"><b>true</b></font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;...</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;정상&nbsp;수행</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">resData.addDataSet</font><font color="#000000">(</font><font color="#000000">employees</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">resVarList.add</font><font color="#000000">(</font><font color="#2a00ff">&#34;ERROR_CODE&#34;</font><font color="#000000">,&nbsp;</font><font color="#990000">200</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">}&nbsp;</font><font color="#7f0055"><b>else&nbsp;</b></font><font color="#000000">{</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;오류&nbsp;발생</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">resVarList.add</font><font color="#000000">(</font><font color="#2a00ff">&#34;ERROR_CODE&#34;</font><font color="#000000">,&nbsp;</font><font color="#990000">500</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">}</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;HttpServletResponse를&nbsp;이용하여&nbsp;HttpPlatformResponse&nbsp;생성</font><br />
<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">resData</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;송신</font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">%&gt;</font></code>


   </td>
  <!-- end source code -->
   </tr>
</table>
X-API를 이용한 JSP 예제
</div>

<a name="doc.DataTransaction"></a>
<h3>2. 데이터 송수신</h3>

<p>nexacro platform과의 데이터 통신은 대부분의 경우 HTTP 상에서 수행되며, 특정 형식으로 변환된 후 송수신된다.</p>

<p>송수신 형식(contentType)은 데이터가 송수신되기 위해 객체에서 특정 형식의 데이터(stream)으로 변환되는 것을 의미하며,
프로토콜 형식(protocolType)은 데이터의 압축, 암호화 등을 수행하는 것을 의미한다.</p>

<p>송수신 형식(contentType)과 프로토콜 형식(protocolType) 등 데이터 변환에 대한 주요 인터페이스는 다음과 같다.</p>

<blockquote>
<table border="thin" cellspacing="2" cellpadding="3">
<tr class="TableSubHeadingColor">
  <th>인터페이스명</th>
  <th>설 명</th>
</tr>
<tr class="TableRowColor">
  <td><code>DataSerializer</code></td>
  <td>PlatformData를 특정 형식의 데이터(stream)으로 변환</td>
</tr>
<tr class="TableRowColor">
  <td><code>DataDeserializer</code></td>
  <td>특정 형식의 데이터(stream)를 PlatformData로 변환</td>
</tr>
<tr class="TableRowColor">
  <td><code>ProtocolEncoder</code></td>
  <td>데이터(stream)의 압축, 암호화 등을 수행</td>
</tr>
<tr class="TableRowColor">
  <td><code>ProtocolDecoder</code></td>
  <td>압축, 암호화 등이 적용된 데이터(stream)를 압축 해제, 복호화 등을 수행</td>
</tr>
</table>
</blockquote>

<a name="doc.TransactionFlow"></a>
<h3>3. 데이터 송수신의 내부 흐름</h3>

데이터 송신 흐름
<ol>
<li>Server에서 데이터를 <code>PlatformData</code>에 저장한 후 송신함</li>
<li><code>DataSerializer</code>에 의해 <code>PlatformData</code>가 특정 형식의 데이터(stream)로 변환됨</li>
<li><code>ProtocolEncoder</code>에 의해 압축, 암호화 등이 적용됨</li>
<li>HTTP 상으로 데이터(stream)가 송신됨</li>
</ol>

데이터 수신 흐름
<ol>
<li>HTTP 상에서 압축, 암호화 등이 적용된 데이터(stream)를 수신받음</li>
<li><code>ProtocolDecoder</code>에 의해 압축 해제, 복호화 등이 수행됨</li>
<li><code>DataDeserializer</code>에 의해 특정 형식의 데이터(stream)가 <code>PlatformData</code>로 변환됨</li>
<li>Client에서 데이터가 저장된 <code>PlatformData</code>를 수신받음</li>
</ol>

<p>다음은 <code>PlatformData</code>를 Binary 송수신 형식으로 암호화와 압축을 수행하는 경우의 내부 흐름 예이다.

<p><img src="serialize_flow.gif"></p>

<a name="doc.TransactionHttpServer"></a>
<h3>4. Server 상의 HTTP 데이터 통신</h3>

<p>nexacro platform과 HTTP 상에서 데이터 통신을 하기 위해서는
<code>HttpPlatformRequest</code>와 <code>HttpPlatformResponse</code>를 이용하여 JSP 또는 Servlet을 작성한다.</p>

<p><code>HttpPlatformRequest</code>와 <code>HttpPlatformResponse</code>는
<code>javax.servlet.http.HttpServletRequest</code>와 <code>javax.servlet.http.HttpServletResponse</code>를 이용하여 HTTP 통신을 수행하며,
<code>HttpPlatformRequest</code>는 nexacro platform으로 데이터(stream)를 수신받은 후 <code>PlatformData</code>으로 변환하고,
그와는 반대로 <code>HttpPlatformResponse</code>는 <code>PlatformData</code>를 데이터(stream)으로 변환한 후 nexacro platform으로 송신한다.</p>

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
	<code>
<font color="#3f7f5f">//&nbsp;HttpServletRequest를&nbsp;이용하여&nbsp;HttpPlatformRequest&nbsp;생성</font><br />

<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font></code>

   </td>
  <!-- end source code -->
   </tr>
</table>
<code>HttpServletRequest</code>으로부터 데이터 수신
</div>

<br />

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->

   <td nowrap="nowrap" valign="top" align="left">
	<code>
<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;...;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;HttpServletResponse를&nbsp;이용하여&nbsp;HttpPlatformResponse&nbsp;생성</font><br />
<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;송신</font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font></code>

   </td>

  <!-- end source code -->
   </tr>
</table>
<code>HttpServletResponse</code>으로 데이터 송신
</div>

<br />

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
	<code>
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.tx.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.data.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;contentType=</font><font color="#2a00ff">&#34;text/xml;&nbsp;charset=UTF-8&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><br />
<font color="#000000">out.clearBuffer</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />

<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">%&gt;</font></code>

   </td>
  <!-- end source code -->
   </tr>

</table>
echo.jsp 예제
</div>

<a name="doc.TransactionHttpClient"></a>
<h3>5. Client 상의 HTTP 데이터 통신</h3>

<p><code>PlatformHttpClient</code>은 X-API를 이용하여 작성된 JSP 등의 서비스와 통신을 수행하며, 통신하는 과정은 다음과 같다.</p>
<ol>
<li><code>PlatformHttpClient</code> 생성</li>
<li>데이터 전송 : <code>sendData</code></li>
<li>데이터 수신 : <code>receiveData</code></li>
<li>종료 : <code>close</code></li>
</ol>

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
	<code>

<font color="#000000">PlatformData&nbsp;reqData&nbsp;=&nbsp;...;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;Client&nbsp;생성</font><br />
<font color="#000000">String&nbsp;url&nbsp;=&nbsp;</font><font color="#2a00ff">&#34;http://host/context/service.jsp&#34;</font><font color="#000000">;</font><br />
<font color="#000000">PlatformHttpClient&nbsp;client&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformHttpClient</font><font color="#000000">(</font><font color="#000000">url</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;송신</font><br />
<font color="#000000">client.sendData</font><font color="#000000">(</font><font color="#000000">reqData</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">PlatformData&nbsp;resData&nbsp;=&nbsp;client.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;종료</font><br />
<font color="#000000">client.close</font><font color="#000000">()</font><font color="#000000">;</font></code>

   </td>
  <!-- end source code -->
   </tr>
</table>
<code>PlatformHttpClient</code>을 이용한 서버와의 통신
</div>

<a name="doc.ContentType"></a>
<h3>6. 데이터 송수신 형식</h3>

<p>송수신 형식은 <a href="#doc.DataTransaction">2. 데이터 송수신</a>에서 언급되었듯이
데이터가 송수신되기 위해 객체에서 특정 형식의 데이터(stream)으로 변환되는 형식을 의미하며,
기 구현된 형식은 다음과 같다.</p>

<blockquote>
<table border="thin" cellspacing="2" cellpadding="3">
<tr class="TableSubHeadingColor">
  <th>상수값</th>
  <th>설 명</th>
</tr>
<tr class="TableRowColor">
  <td><code>PlatformType.CONTENT_TYPE_XML</code></td>
  <td>Platform에서 정의된 XML 형식</td>
</tr>
<tr class="TableRowColor">
  <td><code>PlatformType.CONTENT_TYPE_BINARY</code></td>
  <td>Platform에서 정의된 바이너리 형식</td>
</tr>
<tr class="TableRowColor">
  <td><code>PlatformType.CONTENT_TYPE_SSV</code></td>
  <td>Platform에서 정의된 SSV 형식</td>
</tr>
</table>
</blockquote>

<div align="left">
<table border="2" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.data.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.tx.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><br />
<font color="#3f7f5f">//&nbsp;XML&nbsp;형식으로&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request,&nbsp;PlatformType.CONTENT_TYPE_XML</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;Binary&nbsp;형식으로&nbsp;데이터&nbsp;송신</font><br />

<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response,&nbsp;PlatformType.CONTENT_TYPE_BINARY</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">%&gt;</font></code>

   </td>
  <!-- end source code -->
   </tr>
</table>
XML 형식으로 데이터를 수신하고, Binary 형식으로 데이터를 송신하는 예제
</div>

<p>만약에 사용자에 의해 정의된 송수신 형식이 아닌 기 제공되는 송수신 형식인 경우에는
다음과 같이 <code>HttpPlatformRequest</code>에 별도의 송수신 형식을 지정하지 않아도,
내부에서 자동으로 송수신 형식을 판단하여 처리한다.</p>

<div align="left">
<table border="2" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>

<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.data.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.tx.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#ffffff"></font><br />

<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;contentType=</font><font color="#2a00ff">&#34;text/xml;&nbsp;charset=UTF-8&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><br />
<font color="#000000">out.clearBuffer</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />

<font color="#3f7f5f">//&nbsp;송수신&nbsp;형식을&nbsp;자동으로&nbsp;판단하여&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;HttpPlatformRequest에&nbsp;의해&nbsp;판단된&nbsp;송수신&nbsp;형식으로&nbsp;데이터&nbsp;송신</font><br />
<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response,&nbsp;req</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">%&gt;</font></code>

   </td>
  <!-- end source code -->

   </tr>
</table>
송수신 형식을 자동으로 판단하는 <code>HttpPlatformRequest</code>
</div>

<a name="doc.ProtocolType"></a>
<h3>7. 데이터 프로토콜 형식</h3>

<p>프로토콜 형식은 <a href="#doc.DataTransaction">2. 데이터 송수신</a>에서 언급되었듯이
데이터의 압축, 암호화 등을 수행하는 것을 의미하며, 기 구현된 형식은 다음과 같다.</p>

<blockquote>
<table border="thin" cellspacing="2" cellpadding="3">
<tr class="TableSubHeadingColor">
  <th>상수값</th>
  <th>설 명</th>
</tr>
<tr class="TableRowColor">
  <td><code>PlatformType.PROTOCOL_TYPE_ZLIB</code></td>
  <td>ZLIB 방식으로 압축</td>
</tr>
</table>
</blockquote>

<div align="left">
<table border="2" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">

   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.data.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.tx.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;ZLIB&nbsp;방식으로&nbsp;압축하여&nbsp;데이터&nbsp;송신</font><br />

<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response,&nbsp;PlatformType.CONTENT_TYPE_BINARY</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">res.addProtocolType</font><font color="#000000">(</font><font color="#000000">PlatformType.PROTOCOL_TYPE_ZLIB</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">%&gt;</font></code>

   </td>
  <!-- end source code -->

   </tr>
</table>
ZLIB 방식으로 압축하여 데이터 송신
</div>

<a name="doc.PartResponse"></a>
<h3>8. 데이터 분할 송신</h3>

<p>일반적으로 데이터는 <code>DataSet</code>에 저장하고,
<code>HttpPlatformResponse</code>를 이용하여 nexacro platform으로 데이터를 전달한다.
그러나, 데이터 건수가 많은 대용량 데이터의 경우 모든 데이터를 <code>DataSet</code>에
저장해야하므로, 메모리를 많이 사용하여 시스템에 부담을 줄 수 있다.</p>

<p>이런 문제를 대처하기 위해 데이터를 여러번 나누어 송신하는 기능을 제공한다.
데이터는 나누어 송신하지만, 다수의 연결(connection)이 생성되는것이 아니라,
하나의 연결(connection)로 모든 데이터를 송신함을 유의한다.</p>

<p>데이터 분할 송신은 다음의 순서로 진행되어야 한다.</p>
 
 <ol>
<li>객체 초기화 - <code>HttpPartPlatformResponse</code> 생성</li>
<li>송신 시작 - <code>HttpPartPlatformResponse.start()</code> 호출 (생략 가능)</li>
<li><code>Variable</code> 송신 - <code>HttpPartPlatformResponse.sendVariable(Variable)</code> 호출</li>
<li><code>Variable</code> 송신 반복</li>
<li><code>DataSet</code> 송신 - <code>HttpPartPlatformResponse.sendDataSet(DataSet)</code> 호출</li>
<li><code>DataSet</code> 송신 반복</li>
<li>송신 종료 - <code>HttpPartPlatformResponse.end()</code> 호출 (반드시 호출 필요)</li>
</ol>

<p><code>Variable</code> 송신과 <code>DataSet</code> 송신은 각각 생략이 가능하며,
<code>DataSet</code> 송신 후에 <code>Variable</code> 송신하는 경우에는 예외가
발생한다.</p>

<div align="left"> 
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java"> 
   <tr> 
  <!-- start source code --> 
   <td nowrap="nowrap" valign="top" align="left"> 
    <code> 
<font color="#3f7f5f">//&nbsp;HttpPartPlatformResponse&nbsp;생성</font><br /> 
<font color="#000000">HttpPartPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPartPlatformResponse</font><font color="#000000">(</font><font color="#000000">response</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;company&#34;&nbsp;Variable&nbsp;송신</font><br /> 
<font color="#000000">Variable&nbsp;companyVar&nbsp;=&nbsp;Variable.createVariable</font><font color="#000000">(</font><font color="#2a00ff">&#34;company&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;Amazon.com,&nbsp;Inc.&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#000000">res.sendVariable</font><font color="#000000">(</font><font color="#000000">companyVar</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;url&#34;&nbsp;Variable&nbsp;송신</font><br /> 
<font color="#000000">Variable&nbsp;urlVar&nbsp;=&nbsp;Variable.createVariable</font><font color="#000000">(</font><font color="#2a00ff">&#34;url&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;http://www.amazon.com/&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#000000">res.sendVariable</font><font color="#000000">(</font><font color="#000000">urlVar</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;2011BestBooks&#34;&nbsp;DataSet&nbsp;생성</font><br /> 
<font color="#000000">DataSet&nbsp;bestBooksDs&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">DataSet</font><font color="#000000">(</font><font color="#2a00ff">&#34;2011BestBooks&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#000000">bestBooksDs.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;title&#34;</font><font color="#000000">,&nbsp;DataTypes.STRING,&nbsp;</font><font color="#990000">64</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#000000">bestBooksDs.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;author&#34;</font><font color="#000000">,&nbsp;DataTypes.STRING,&nbsp;</font><font color="#990000">64</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#000000">bestBooksDs.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;publisher&#34;</font><font color="#000000">,&nbsp;DataTypes.STRING,&nbsp;</font><font color="#990000">64</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#000000">bestBooksDs.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;price&#34;</font><font color="#000000">,&nbsp;DataTypes.INT,&nbsp;</font><font color="#990000">16</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;2011BestBooks&#34;&nbsp;DataSet의&nbsp;데이터&nbsp;추가</font><br /> 
<font color="#000000">String</font><font color="#000000">[][]&nbsp;</font><font color="#000000">bestBooks&nbsp;=&nbsp;</font><font color="#000000">{</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{&nbsp;</font><font color="#2a00ff">&#34;Lost&nbsp;in&nbsp;Shangri-La&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;Mitchell&nbsp;Zuckoff&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;Harper&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;27&#34;&nbsp;</font><font color="#000000">}</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;...</font><br /> 
<font color="#000000">}</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#7f0055"><b>for&nbsp;</b></font><font color="#000000">(</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">i&nbsp;=&nbsp;</font><font color="#990000">0</font><font color="#000000">;&nbsp;i&nbsp;&lt;&nbsp;bestBooks.length;&nbsp;i++</font><font color="#000000">)&nbsp;{</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">row&nbsp;=&nbsp;bestBooksDs.newRow</font><font color="#000000">()</font><font color="#000000">;</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">bestBooksDs.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;title&#34;</font><font color="#000000">,&nbsp;bestBooks</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">][</font><font color="#990000">0</font><font color="#000000">])</font><font color="#000000">;</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">bestBooksDs.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;author&#34;</font><font color="#000000">,&nbsp;bestBooks</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">][</font><font color="#990000">1</font><font color="#000000">])</font><font color="#000000">;</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">bestBooksDs.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;publisher&#34;</font><font color="#000000">,&nbsp;bestBooks</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">][</font><font color="#990000">2</font><font color="#000000">])</font><font color="#000000">;</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">bestBooksDs.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;price&#34;</font><font color="#000000">,&nbsp;Float.parseFloat</font><font color="#000000">(</font><font color="#000000">bestBooks</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">][</font><font color="#990000">3</font><font color="#000000">]))</font><font color="#000000">;</font><br /> 
<font color="#000000">}</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;2011BestBooks&#34;&nbsp;DataSet&nbsp;송신</font><br /> 
<font color="#3f7f5f">//&nbsp;송신&nbsp;후의&nbsp;DataSet&nbsp;데이터는&nbsp;자동으로&nbsp;삭제됨</font><br /> 
<font color="#000000">res.sendDataSet</font><font color="#000000">(</font><font color="#000000">bestBooksDs</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;fictionBooks&#34;&nbsp;DataSet&nbsp;생성</font><br /> 
<font color="#000000">DataSet&nbsp;fictionBooksDs&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">DataSet</font><font color="#000000">(</font><font color="#2a00ff">&#34;fictionBooks&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#000000">fictionBooksDs.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;title&#34;</font><font color="#000000">,&nbsp;DataTypes.STRING,&nbsp;</font><font color="#990000">64</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#000000">fictionBooksDs.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;author&#34;</font><font color="#000000">,&nbsp;DataTypes.STRING,&nbsp;</font><font color="#990000">64</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#000000">fictionBooksDs.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;publisher&#34;</font><font color="#000000">,&nbsp;DataTypes.STRING,&nbsp;</font><font color="#990000">64</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#000000">fictionBooksDs.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;price&#34;</font><font color="#000000">,&nbsp;DataTypes.INT,&nbsp;</font><font color="#990000">16</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;fictionBooks&#34;&nbsp;DataSet의&nbsp;&#34;comic&#34;&nbsp;데이터&nbsp;추가</font><br /> 
<font color="#000000">String</font><font color="#000000">[][]&nbsp;</font><font color="#000000">comicBooks&nbsp;=&nbsp;</font><font color="#000000">{</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{&nbsp;</font><font color="#2a00ff">&#34;The&nbsp;Slackers&nbsp;Guide&nbsp;to&nbsp;U.S.&nbsp;History&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;John&nbsp;Pfeiffer&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;Adams&nbsp;Media&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;13&#34;&nbsp;</font><font color="#000000">}</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;...</font><br /> 
<font color="#000000">}</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#7f0055"><b>for&nbsp;</b></font><font color="#000000">(</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">i&nbsp;=&nbsp;</font><font color="#990000">0</font><font color="#000000">;&nbsp;i&nbsp;&lt;&nbsp;comicBooks.length;&nbsp;i++</font><font color="#000000">)&nbsp;{</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;...</font><br /> 
<font color="#000000">}</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;fictionBooks&#34;&nbsp;DataSet의&nbsp;&#34;comic&#34;&nbsp;데이터&nbsp;송신</font><br /> 
<font color="#000000">res.sendDataSet</font><font color="#000000">(</font><font color="#000000">fictionBooksDs</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;fictionBooks&#34;&nbsp;DataSet의&nbsp;&#34;drama&#34;&nbsp;데이터&nbsp;추가</font><br /> 
<font color="#000000">String</font><font color="#000000">[][]&nbsp;</font><font color="#000000">dramaBooks&nbsp;=&nbsp;</font><font color="#000000">{</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{&nbsp;</font><font color="#2a00ff">&#34;Megan's&nbsp;Way&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;Melissa&nbsp;Foster&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;Outskirts&nbsp;Press,&nbsp;Inc.&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;15&#34;&nbsp;</font><font color="#000000">}</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;...</font><br /> 
<font color="#000000">}</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#7f0055"><b>for&nbsp;</b></font><font color="#000000">(</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">i&nbsp;=&nbsp;</font><font color="#990000">0</font><font color="#000000">;&nbsp;i&nbsp;&lt;&nbsp;dramaBooks.length;&nbsp;i++</font><font color="#000000">)&nbsp;{</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;...</font><br /> 
<font color="#000000">}</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;fictionBooks&#34;&nbsp;DataSet의&nbsp;&#34;drama&#34;&nbsp;데이터&nbsp;송신</font><br /> 
<font color="#000000">res.sendDataSet</font><font color="#000000">(</font><font color="#000000">fictionBooksDs</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;fictionBooks&#34;&nbsp;DataSet의&nbsp;&#34;essays&#34;&nbsp;데이터&nbsp;추가</font><br /> 
<font color="#000000">String</font><font color="#000000">[][]&nbsp;</font><font color="#000000">essaysBooks&nbsp;=&nbsp;</font><font color="#000000">{</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{&nbsp;</font><font color="#2a00ff">&#34;Dracula&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;Bram&nbsp;Stoker&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;Bedrick.&nbsp;Blackie&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;8&#34;&nbsp;</font><font color="#000000">}</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;...</font><br /> 
<font color="#000000">}</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#7f0055"><b>for&nbsp;</b></font><font color="#000000">(</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">i&nbsp;=&nbsp;</font><font color="#990000">0</font><font color="#000000">;&nbsp;i&nbsp;&lt;&nbsp;essaysBooks.length;&nbsp;i++</font><font color="#000000">)&nbsp;{</font><br /> 
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;...</font><br /> 
<font color="#000000">}</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;&#34;fictionBooks&#34;&nbsp;DataSet의&nbsp;&#34;essays&#34;&nbsp;데이터&nbsp;송신</font><br /> 
<font color="#000000">res.sendDataSet</font><font color="#000000">(</font><font color="#000000">fictionBooksDs</font><font color="#000000">)</font><font color="#000000">;</font><br /> 
<font color="#ffffff"></font><br /> 
<font color="#3f7f5f">//&nbsp;HttpPartPlatformResponse&nbsp;종료</font><br /> 
<font color="#000000">res.end</font><font color="#000000">()</font><font color="#000000">;</font></code> 
    
   </td> 
  <!-- end source code --> 
   </tr> 
</table> 
데이터 분할 송신
</div> 

<a name="doc.HttpGetParameter"></a>
<h3>9. HTTP GET 방식의 데이터</h3>

<p>때로는 데이터를 HTTP GET 방식으로 전달하고, 이를 수신받기를 원하는 경우도 있다.
대부분의 경우 간단한 데이터일 것이다.</p>

<p>이를 위해서 <code>HttpPlatformRequest</code>는 다음과 같은 2가지 속성을 지원한다.</p>

<blockquote>
  <table border="thin">
    <tr class="TableSubHeadingColor">
      <th>속성명</th>
      <th>데이터 형식</th>
      <th>유효한 값</th>
      <th>기본값</th>
      <th>설  명</th>
    </tr>
    <tr class="TableRowColor">
      <td>http.getparameter.register</td>
      <td>String</td>
      <td>true 또는 false</td>
      <td>false</td>
      <td>데이터 수신시 HTTP GET 데이터의 등록 여부</td>
    </tr>
    <tr class="TableRowColor">
      <td>http.getparameter.asvariable</td>
      <td>String</td>
      <td>true 또는 false</td>
      <td>false</td>
      <td>
      HTTP GET 데이터 등록시 <code>Variable</code> 형식으로의 변환 여부,
      false인 경우 HTTP GET 데이터는 <code>DataSet</code> 형식으로 변환
      </td>
    </tr>
  </table>
</blockquote>

<div align="left">
<table border="2" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#3f7f5f">//&nbsp;HttpPlatformRequest&nbsp;생성</font><br />

<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#3f7f5f">//&nbsp;HTTP&nbsp;GET&nbsp;데이터의&nbsp;등록&nbsp;설정</font><br />

<font color="#000000">req.setProperty</font><font color="#000000">(</font><font color="#2a00ff">&#34;http.getparameter.register&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;true&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#3f7f5f">//&nbsp;Variable&nbsp;형식으로의&nbsp;변환&nbsp;설정</font><br />
<font color="#000000">req.setProperty</font><font color="#000000">(</font><font color="#2a00ff">&#34;http.getparameter.asvariable&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;true&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;HttpPlatformResponse&nbsp;생성</font><br />
<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;송신</font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font></code>

   </td>
  <!-- end source code -->
   </tr>
</table>
HTTP GET 방식의 데이터 수신
</div>

<a name="doc.FileUpload"></a>
<h3>10. 파일 업로드</h3>

<p>파일 업로드는 Client에서 Server (X-API)로 파일을 전송하는 것을 의미한다.
X-API는 파일 송수신을 위한 API가 아니기 때문에, 가급적 타 제품 또는 타 패키지를 이용하여 파일을 송수신할 것을 권장한다.
특히, X-API에서 XML 형식으로 파일을 송수신하는 경우 메모리를 많이 사용하므로, 성능에 영향을 미칠 수 있음을 유의한다.
</p>

<p>만약에 송신되는 또는 수신받은 데이터의 데이터 형식(dataType)을 변경하기 원하는 경우
<code>DataTypeChanger</code>를 이용하여 변경할 수 있다. 이 <code>DataTypeChanger</code>를
이용하여 수신받은 byte 배열 또는 <code>String</code> 데이터를 파일로 저장할 수 있다.</p>

파일 업로드 과정
<ol>
<li>Client에서 파일 데이터를 byte 배열 형식으로 <code>DataSet</code>에 저장</li>
<li>Client에서 Server로 데이터 송신</li>
<li>Server에서 byte 배열 형식으로 송신된 데이터의 데이터 형식(dataType)을 <code>DataTypes.FILE</code> 데이터 형식(dataType)으로 변환하는 <code>DataTypeChanger</code> 등록</li>
<li>Server에서 Client으로부터 데이터 수신</li>
<li>Server에서 데이터를 수신하는 과정에 <code>DataTypes.FILE</code> 데이터 형식(dataType)으로 변환되는 데이터는 자동으로 임시 파일로 저장</li>
<li>Server에서 저장된 임시 파일 조작</li>
</ol>

<div align="left">
<table border="2" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;java.io.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.tx.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.data.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;contentType=</font><font color="#2a00ff">&#34;text/xml;&nbsp;charset=UTF-8&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><br />
<font color="#3f7f5f">//&nbsp;버퍼(buffer)&nbsp;초기화</font><br />
<font color="#000000">out.clearBuffer</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />

<font color="#3f7f5f">//&nbsp;HttpPlatformRequest&nbsp;생성</font><br />
<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#3f7f5f">//&nbsp;byte&nbsp;배열&nbsp;데이터를&nbsp;파일로&nbsp;저장하기&nbsp;위한&nbsp;DataTypeChanger&nbsp;설정</font><br />
<font color="#000000">req.setDataTypeChanger</font><font color="#000000">(</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">UploadDataTypeChanger</font><font color="#000000">())</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;수신된&nbsp;데이터&nbsp;참조</font><br />
<font color="#000000">PlatformData&nbsp;reqData&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;임시로&nbsp;저장된&nbsp;파일들을&nbsp;업로드될&nbsp;위치로&nbsp;이동</font><br />
<font color="#000000">copyFiles</font><font color="#000000">(</font><font color="#000000">reqData</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;송신&nbsp;데이터&nbsp;생성</font><br />

<font color="#000000">PlatformData&nbsp;resData&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">VariableList&nbsp;resVl&nbsp;=&nbsp;resData.getVariableList</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;오류코드&nbsp;설정</font><br />

<font color="#000000">resVl.add</font><font color="#000000">(</font><font color="#2a00ff">&#34;ERROR_CODE&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;200&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;HttpPlatformResponse&nbsp;생성</font><br />
<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response,&nbsp;req</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#3f7f5f">//&nbsp;송신&nbsp;데이터&nbsp;설정</font><br />
<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">resData</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;송신</font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#000000">%&gt;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">&lt;%!</font><br />
<font color="#3f7f5f">//&nbsp;임시로&nbsp;저장된&nbsp;파일들을&nbsp;업로드될&nbsp;위치로&nbsp;이동</font><br />
<font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">copyFiles</font><font color="#000000">(</font><font color="#000000">PlatformData&nbsp;data</font><font color="#000000">)&nbsp;{</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일들이&nbsp;업로드될&nbsp;위치</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">String&nbsp;dir&nbsp;=&nbsp;</font><font color="#2a00ff">&#34;C:\\upload&#34;</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일&nbsp;데이터가&nbsp;저장된&nbsp;DataSet&nbsp;참조</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">DataSet&nbsp;ds&nbsp;=&nbsp;data.getDataSet</font><font color="#000000">(</font><font color="#2a00ff">&#34;resources&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;DataSet의&nbsp;행(row)의&nbsp;갯수&nbsp;참조</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">count&nbsp;=&nbsp;</font><font color="#000000">(</font><font color="#000000">ds&nbsp;==&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">)&nbsp;</font><font color="#000000">?&nbsp;</font><font color="#990000">0&nbsp;</font><font color="#000000">:&nbsp;ds.getRowCount</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;DataSet의&nbsp;행(row)의&nbsp;갯수,&nbsp;즉&nbsp;업로드된&nbsp;파일의&nbsp;갯수만큼&nbsp;순환</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>for&nbsp;</b></font><font color="#000000">(</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">i&nbsp;=&nbsp;</font><font color="#990000">0</font><font color="#000000">;&nbsp;i&nbsp;&lt;&nbsp;count;&nbsp;i++</font><font color="#000000">)&nbsp;{</font><br />

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일명&nbsp;참조</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">String&nbsp;name&nbsp;=&nbsp;ds.getString</font><font color="#000000">(</font><font color="#000000">i,&nbsp;</font><font color="#2a00ff">&#34;name&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일크기&nbsp;참조</font><br />

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">size&nbsp;=&nbsp;ds.getInt</font><font color="#000000">(</font><font color="#000000">i,&nbsp;</font><font color="#2a00ff">&#34;size&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일의&nbsp;변경시간&nbsp;참조</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>long&nbsp;</b></font><font color="#000000">lastWriteTime&nbsp;=&nbsp;ds.getLong</font><font color="#000000">(</font><font color="#000000">i,&nbsp;</font><font color="#2a00ff">&#34;lastWriteTime&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;임시로&nbsp;저장된&nbsp;파일의&nbsp;경로&nbsp;참조</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">String&nbsp;filename&nbsp;=&nbsp;ds.getString</font><font color="#000000">(</font><font color="#000000">i,&nbsp;</font><font color="#2a00ff">&#34;content&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;임시로&nbsp;저장된&nbsp;File</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">File&nbsp;file&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">File</font><font color="#000000">(</font><font color="#000000">filename</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;업로드될&nbsp;위치로&nbsp;이동할&nbsp;File</font><br />

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">File&nbsp;dest&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">File</font><font color="#000000">(</font><font color="#000000">dir,&nbsp;name</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일&nbsp;이동</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">file.renameTo</font><font color="#000000">(</font><font color="#000000">dest</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br />
<font color="#000000">}</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;수신&nbsp;받은&nbsp;DataSet&nbsp;열(column)의&nbsp;데이터&nbsp;형식(dataType)을&nbsp;변경하는&nbsp;DataTypeChanger</font><br />
<font color="#7f0055"><b>class&nbsp;</b></font><font color="#000000">UploadDataTypeChanger&nbsp;</font><font color="#7f0055"><b>implements&nbsp;</b></font><font color="#000000">DataTypeChanger&nbsp;</font><font color="#000000">{</font><br />

<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;byte&nbsp;배열의&nbsp;데이터가&nbsp;저장된&nbsp;DataSet&nbsp;열(column)의&nbsp;데이터&nbsp;형식(dataType)을&nbsp;DataTypes.FILE&nbsp;데이터&nbsp;형식(dataType)으로&nbsp;변경</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;수신&nbsp;받는&nbsp;데이터의&nbsp;데이터&nbsp;형식(dataType)을&nbsp;DataTypes.FILE&nbsp;데이터&nbsp;형식(dataType)으로&nbsp;변경하는&nbsp;경우</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;데이터는&nbsp;자동으로&nbsp;임시&nbsp;파일로&nbsp;저장되고,&nbsp;DataSet에는&nbsp;저장된&nbsp;임시&nbsp;파일의&nbsp;경로가&nbsp;저장된다.</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">getDataType</font><font color="#000000">(</font><font color="#000000">String&nbsp;dsName,&nbsp;String&nbsp;columnName,&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">dataType</font><font color="#000000">)&nbsp;{</font><br />

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;&#34;resources&#34;&nbsp;DataSet의&nbsp;&#34;content&#34;&nbsp;열(column)인&nbsp;경우&nbsp;DataTypes.FILE&nbsp;데이터&nbsp;형식(dataType)&nbsp;반환</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">(</font><font color="#2a00ff">&#34;resources&#34;</font><font color="#000000">.equals</font><font color="#000000">(</font><font color="#000000">dsName</font><font color="#000000">)&nbsp;</font><font color="#000000">&amp;&amp;&nbsp;</font><font color="#2a00ff">&#34;content&#34;</font><font color="#000000">.equals</font><font color="#000000">(</font><font color="#000000">columnName</font><font color="#000000">))&nbsp;{</font><br />

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>return&nbsp;</b></font><font color="#000000">DataTypes.FILE;</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;이외에는&nbsp;원&nbsp;데이터&nbsp;형식(dataType)&nbsp;반환</font><br />
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>return&nbsp;</b></font><font color="#000000">dataType;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br />

<font color="#000000">}</font><br />
<font color="#000000">%&gt;</font></code>

   </td>
  <!-- end source code -->
   </tr>
</table>
파일 업로드 jsp 예제
</div>

<a name="doc.FileDownload"></a>
<h3>11. 파일 다운로드</h3>

<p>파일 다운로드는 Server (X-API)에서 Client로 파일을 전송하는 것을 의미한다.
X-API는 파일 송수신을 위한 API가 아니기 때문에, 가급적 타 제품 또는 타 패키지를 이용하여 파일을 송수신할 것을 권장한다.
특히, X-API에서 XML 형식으로 파일을 송수신하는 경우 메모리를 많이 사용하므로, 성능에 영향을 미칠 수 있음을 유의한다.
</p>

<p>파일의 데이터를 Client으로 송신을 원하는 경우에는 다음의 2가지 경우가 가능하다.</p>

<ul>
<li>
  <code>DataSet</code>의 열(column)을 <code>DataTypes.BLOB</code> 형식으로 추가하고,
  파일의 데이터를 byte 배열 형식으로 읽고, <code>DataSet</code>에 설정한다.
</li>
<li>
  <code>DataSet</code>의 열(column)을 <code>DataTypes.FILE</code> 형식으로 추가하고, 다운로드할 파일의 경로를 <code>DataSet</code>에 설정한다.
  데이터 송신시 <code>DataTypes.FILE</code> 형식은 자동으로 <code>DataTypes.BLOB</code> 형식으로 변환되며, 파일 경로에 위치한 파일의 데이터를 송신한다.
</li>
</ul>

<p>다음은 <code>DataTypes.FILE</code> 데이터 형식(dataType)을 이용한 파일 다운로드 예제이다.</p>

<div align="left">
<table border="2" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;java.io.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.tx.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.data.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;contentType=</font><font color="#2a00ff">&#34;text/xml;&nbsp;charset=UTF-8&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><br />
<font color="#3f7f5f">//&nbsp;버퍼(buffer)&nbsp;초기화</font><br />
<font color="#000000">out.clearBuffer</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />

<font color="#3f7f5f">//&nbsp;HttpPlatformRequest&nbsp;생성</font><br />
<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;수신&nbsp;데이터&nbsp;참조</font><br />
<font color="#000000">PlatformData&nbsp;reqData&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;파일&nbsp;데이터가&nbsp;포함된&nbsp;송신&nbsp;데이터&nbsp;생성</font><br />
<font color="#000000">PlatformData&nbsp;resData&nbsp;=&nbsp;createData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />

<font color="#3f7f5f">//&nbsp;HttpPlatformResponse&nbsp;생성</font><br />
<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response,&nbsp;req</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#3f7f5f">//&nbsp;송신&nbsp;데이터&nbsp;설정</font><br />

<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">resData</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;송신</font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">%&gt;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">&lt;%!</font><br />
<font color="#3f7f5f">//&nbsp;파일&nbsp;데이터가&nbsp;포함된&nbsp;송신&nbsp;데이터&nbsp;생성</font><br />
<font color="#000000">PlatformData&nbsp;createData</font><font color="#000000">()&nbsp;{</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;PlatformData&nbsp;생성</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일&nbsp;데이터를&nbsp;저장할&nbsp;DataSet&nbsp;생성</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">DataSet&nbsp;ds&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">DataSet</font><font color="#000000">(</font><font color="#2a00ff">&#34;resources&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일명의&nbsp;열(column)&nbsp;추가</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">ds.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;name&#34;</font><font color="#000000">,&nbsp;DataTypes.STRING,&nbsp;</font><font color="#990000">128</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일크기의&nbsp;열(column)&nbsp;추가</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">ds.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;size&#34;</font><font color="#000000">,&nbsp;DataTypes.INT</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일&nbsp;변경시간의&nbsp;열(column)&nbsp;추가</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">ds.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;lastWriteTime&#34;</font><font color="#000000">,&nbsp;DataTypes.LONG</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일&nbsp;데이터의&nbsp;열(column)&nbsp;추가</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;데이터&nbsp;형식(dataType)을&nbsp;DataTypes.FILE&nbsp;데이터&nbsp;형식(dataType)으로&nbsp;추가하는&nbsp;경우</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;데이터&nbsp;송신시&nbsp;데이터&nbsp;형식(dataType)은&nbsp;자동으로&nbsp;DataTypes.BLOB&nbsp;데이터&nbsp;형식(dataType)으로&nbsp;변환되며,</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;데이터는&nbsp;설정된&nbsp;파일&nbsp;경로의&nbsp;파일&nbsp;데이터를&nbsp;전송한다.</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">ds.addColumn</font><font color="#000000">(</font><font color="#2a00ff">&#34;content&#34;</font><font color="#000000">,&nbsp;DataTypes.FILE</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;DataSet의&nbsp;행(row)&nbsp;데이터&nbsp;추가</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">addRow</font><font color="#000000">(</font><font color="#000000">ds,&nbsp;</font><font color="#2a00ff">&#34;C:\\download\\data_structure.gif&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">addRow</font><font color="#000000">(</font><font color="#000000">ds,&nbsp;</font><font color="#2a00ff">&#34;C:\\download\\serialize_flow.gif&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;PlatformData의&nbsp;DataSet&nbsp;추가</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">data.addDataSet</font><font color="#000000">(</font><font color="#000000">ds</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;생성된&nbsp;PlatformData&nbsp;반환</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>return&nbsp;</b></font><font color="#000000">data;</font><br />
<font color="#000000">}</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;DataSet의&nbsp;행(row)&nbsp;데이터&nbsp;추가</font><br />
<font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">addRow</font><font color="#000000">(</font><font color="#000000">DataSet&nbsp;ds,&nbsp;String&nbsp;filename</font><font color="#000000">)&nbsp;{</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;DataSet의&nbsp;행(row)&nbsp;추가</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">row&nbsp;=&nbsp;ds.newRow</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;다운로드될&nbsp;File&nbsp;생성</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">File&nbsp;file&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">File</font><font color="#000000">(</font><font color="#000000">filename</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일명&nbsp;설정</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">ds.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;name&#34;</font><font color="#000000">,&nbsp;file.getName</font><font color="#000000">())</font><font color="#000000">;</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일크기&nbsp;설정</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">ds.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;size&#34;</font><font color="#000000">,&nbsp;file.length</font><font color="#000000">())</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일의&nbsp;변경시간&nbsp;설정</font><br />

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">ds.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;lastWriteTime&#34;</font><font color="#000000">,&nbsp;file.lastModified</font><font color="#000000">())</font><font color="#000000">;</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;파일의&nbsp;경로&nbsp;설정</font><br />
<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">ds.set</font><font color="#000000">(</font><font color="#000000">row,&nbsp;</font><font color="#2a00ff">&#34;content&#34;</font><font color="#000000">,&nbsp;file.getPath</font><font color="#000000">())</font><font color="#000000">;</font><br />

<font color="#000000">}</font><br />
<font color="#000000">%&gt;</font></code>

   </td>
  <!-- end source code -->
   </tr>
</table>
파일 다운로드 jsp 예제
</div>

<a name="doc.TransactionIo"></a>
<h3>12. <code>Stream</code>을 이용한 데이터 통신</h3>

<p>때로는 <code>Socket</code>과 <code>File</code> 등과 같이 <code>InputStream</code>과
<code>OutputStream</code>을 이용하여 데이터를 통신할 필요성이 발생한다.
이런 경우 <code>PlatformRequest</code>와 <code>PlatformResponse</code>를 이용하여 데이터를 주고 받을 수 있다.
물론, 단 방향만 수행할 수도 있다.</p>

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
	<code>
<font color="#000000">InputStream&nbsp;in&nbsp;=&nbsp;...;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;PlatformRequest&nbsp;생성</font><br />
<font color="#000000">PlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformRequest</font><font color="#000000">(</font><font color="#000000">in</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />

<font color="#3f7f5f">//&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">PlatformData&nbsp;reqData&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">OutputStream&nbsp;out&nbsp;=&nbsp;...;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;PlatformResponse&nbsp;생성</font><br />
<font color="#000000">PlatformData&nbsp;resData&nbsp;=&nbsp;...;</font><br />
<font color="#000000">PlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformResponse</font><font color="#000000">(</font><font color="#000000">out</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">resData</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;송신</font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font></code>

   </td>

  <!-- end source code -->
   </tr>
</table>
<code>PlatformRequest</code>와 <code>PlatformResponse</code>를 이용한 데이터 통신
</div>

<p>참고로, 다음과 같이 <code>PlatformRequest</code>와 <code>PlatformResponse</code>를 이용하여
<code>PlatformHttpClient</code>와 동일한 기능을 수행할 수도 있다.</p>

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
	<code>
<font color="#3f7f5f">//&nbsp;연결&nbsp;생성</font><br />

<font color="#000000">String&nbsp;loc&nbsp;=&nbsp;</font><font color="#2a00ff">&#34;http://host/context/service.jsp&#34;</font><font color="#000000">;</font><br />
<font color="#000000">URL&nbsp;url&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">URL</font><font color="#000000">(</font><font color="#000000">loc</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />

<font color="#000000">HttpURLConnection&nbsp;conn&nbsp;=&nbsp;</font><font color="#000000">(</font><font color="#000000">HttpURLConnection</font><font color="#000000">)&nbsp;</font><font color="#000000">url.openConnection</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">conn.setRequestProperty</font><font color="#000000">(</font><font color="#2a00ff">&#34;Content-Type&#34;</font><font color="#000000">,&nbsp;</font><font color="#2a00ff">&#34;text/xml;&nbsp;charset=UTF-8&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">conn.setRequestMethod</font><font color="#000000">(</font><font color="#2a00ff">&#34;POST&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">conn.setDoOutput</font><font color="#000000">(</font><font color="#7f0055"><b>true</b></font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">conn.setDoInput</font><font color="#000000">(</font><font color="#7f0055"><b>true</b></font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;송신</font><br />
<font color="#000000">PlatformData&nbsp;sendingData&nbsp;=&nbsp;...;</font><br />
<font color="#000000">OutputStream&nbsp;out&nbsp;=&nbsp;conn.getOutputStream</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#000000">PlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformResponse</font><font color="#000000">(</font><font color="#000000">out,&nbsp;PlatformType.CONTENT_TYPE_XML,&nbsp;</font><font color="#2a00ff">&#34;UTF-8&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">sendingData</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">out.close</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;수신</font><br />
<font color="#000000">InputStream&nbsp;in&nbsp;=&nbsp;conn.getInputStream</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#000000">PlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformRequest</font><font color="#000000">(</font><font color="#000000">in</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">PlatformData&nbsp;receivedData&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#000000">in.close</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;연결&nbsp;종료</font><br />
<font color="#000000">conn.disconnect</font><font color="#000000">()</font><font color="#000000">;</font></code>

   </td>
  <!-- end source code -->

   </tr>
</table>
<code>PlatformRequest</code>와 <code>PlatformResponse</code>를 이용한 서버와의 통신
</div>

<a name="doc.DataFileIo"></a>
<h3>13. 파일로부터의 데이터 적재와 저장</h3>

<p>파일의 데이터를 읽거나 쓰기 위해서는 다음과 같은 방법이 있다.</p>
<ul>
<li><code>PlatformRequest</code>와 <code>PlatformResponse</code>를 이용하여 직접 읽거나 쓰는 방법</li>
<li><code>PlatformFileClient</code>을 이용하여 데이터를 읽거나 쓰는 방법</li>
</ul>

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">

	<code>
<font color="#3f7f5f">//&nbsp;데이터가&nbsp;저장된&nbsp;파일</font><br />
<font color="#000000">String&nbsp;sourceFilename&nbsp;=&nbsp;...;</font><br />
<font color="#000000">InputStream&nbsp;source&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">FileInputStream</font><font color="#000000">(</font><font color="#000000">sourceFilename</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;파일로부터&nbsp;데이터&nbsp;읽기</font><br />
<font color="#000000">PlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformRequest</font><font color="#000000">(</font><font color="#000000">source,&nbsp;PlatformType.CONTENT_TYPE_XML</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">source.close</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터를&nbsp;저장할&nbsp;파일</font><br />
<font color="#000000">String&nbsp;targetFilename&nbsp;=&nbsp;...;</font><br />
<font color="#000000">OutputStream&nbsp;target&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">FileOutputStream</font><font color="#000000">(</font><font color="#000000">targetFilename</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이타를&nbsp;파일로&nbsp;쓰기</font><br />
<font color="#000000">PlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformResponse</font><font color="#000000">(</font><font color="#000000">target,&nbsp;PlatformType.CONTENT_TYPE_BINARY</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">target.close</font><font color="#000000">()</font><font color="#000000">;</font></code>

   </td>

  <!-- end source code -->
   </tr>
</table>
파일의 데이터 읽기와 쓰기
</div>

<br />

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
	<code>
<font color="#3f7f5f">//&nbsp;데이터가&nbsp;저장된&nbsp;파일</font><br />

<font color="#000000">String&nbsp;sourceFilename&nbsp;=&nbsp;...;</font><br />
<font color="#3f7f5f">//&nbsp;데이터를&nbsp;저장할&nbsp;파일</font><br />
<font color="#000000">String&nbsp;targetFilename&nbsp;=&nbsp;...;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;PlatformFileClient&nbsp;생성</font><br />

<font color="#000000">PlatformFileClient&nbsp;client&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformFileClient</font><font color="#000000">(</font><font color="#000000">sourceFilename,&nbsp;targetFilename</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#3f7f5f">//&nbsp;데이터가&nbsp;저장된&nbsp;형식</font><br />
<font color="#000000">client.setSourceContentType</font><font color="#000000">(</font><font color="#000000">PlatformType.CONTENT_TYPE_XML</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#3f7f5f">//&nbsp;데이터를&nbsp;저장할&nbsp;형식</font><br />
<font color="#000000">client.setTargetContentType</font><font color="#000000">(</font><font color="#000000">PlatformType.CONTENT_TYPE_BINARY</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;파일로부터&nbsp;데이터&nbsp;읽기</font><br />

<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;client.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이타를&nbsp;파일로&nbsp;쓰기</font><br />
<font color="#000000">client.sendData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;종료</font><br />
<font color="#000000">client.close</font><font color="#000000">()</font><font color="#000000">;</font></code>

   </td>
  <!-- end source code -->
   </tr>
</table>
<code>PlatformFileClient</code>을 이용한 데이타 읽기와 쓰기
</div>

<a name="doc.DataToXml"></a>
<h3>14. <code>PlatformData</code>를 XML 문자열로 변환</h3>

<p><code>PlatformData</code>를 XML 문자열로 변환하기 위해서는 <code>PlatformResponse</code>를 이용하여 가능하다.
즉, XML 문자열을 저장할 버퍼를 생성하여 <code>PlatformResponse</code>으로 전달하고,
<code>PlatformResponse</code>는 XML 방식으로 <code>PlatformData</code>를 출력하면 된다.</p>

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
	<code>
<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;...;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;XML&nbsp;문자열을&nbsp;저장할&nbsp;버퍼</font><br />

<font color="#000000">Writer&nbsp;out&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">CharArrayWriter</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;CONTENT_TYPE_XML&nbsp;형식으로&nbsp;PlatformResponse&nbsp;생성</font><br />
<font color="#000000">PlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">PlatformResponse</font><font color="#000000">(</font><font color="#000000">out,&nbsp;PlatformType.CONTENT_TYPE_XML</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;XML&nbsp;문자열&nbsp;저장</font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />

<font color="#000000">out.close</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;저장된&nbsp;XML&nbsp;문자열</font><br />
<font color="#000000">String&nbsp;xml&nbsp;=&nbsp;out.toString</font><font color="#000000">()</font><font color="#000000">;</font></code>


   </td>
  <!-- end source code -->
   </tr>
</table>
<code>PlatformData</code>를 XML 문자열로 변환
</div>

<a name="doc.TransactionCrud"></a>
<h3>15. 추가, 변경, 삭제된 데이터 송신</h3>

<p><code>DataSet</code>은 데이터가 추가, 변경, 삭제된 경우 변경된 상태와 변경 이전의 원본 데이터를 저장한다.
자세한 정보는 <a href="../data/package-summary.html#doc.Savepoint">11. <code>DataSet</code>의 원본 데이터와 변경된 데이터</a>를 참조한다.</p>

<p><code>PlatformResponse</code> 또는 <code>HttpPlatformResponse</code>는 위와 같은 데이터를
저장 방식(<code>saveType</code>)에 따라 구분하여 전송한다.</p>

<blockquote>
<table border="thin" cellspacing="2" cellpadding="3">
<tr class="TableSubHeadingColor">
  <th>상수값</th>
  <th>설 명</th>
</tr>
<tr class="TableRowColor">
  <td><code>DataSet.SAVE_TYPE_NONE</code></td>
  <td>미설정</td>
</tr>
<tr class="TableRowColor">
  <td><code>DataSet.SAVE_TYPE_ALL</code></td>
  <td>현재의 데이터와 추가, 변경, 삭제된 모든 데이터 저장 또는 전송</td>
</tr>
<tr class="TableRowColor">
  <td><code>DataSet.SAVE_TYPE_NORMAL</code></td>
  <td>현재의 데이터만 저장 또는 전송</td>
</tr>
<tr class="TableRowColor">
  <td><code>DataSet.SAVE_TYPE_UPDATED</code></td>
  <td>추가, 변경된 데이터만 저장 또는 전송</td>
</tr>
<tr class="TableRowColor">
  <td><code>DataSet.SAVE_TYPE_DELETED</code></td>
  <td>삭제된 데이터만 저장 또는 전송</td>
</tr>
<tr class="TableRowColor">
  <td><code>DataSet.SAVE_TYPE_CHANGED</code></td>
  <td>추가, 변경, 삭제된 데이터만 저장 또는 전송</td>
</tr>
</table>
</blockquote>

<p>저장 방식(<code>saveType</code>)은 <code>PlatformData</code>와 <code>DataSet</code>이 가지고 있으며,
<code>DataSet</code>의 저장 방식이 우선으로 적용되고,
<code>DataSet</code>의 저장 방식이 <code>DataSet.SAVE_TYPE_NONE</code>인 경우
<code>PlatformData</code>의 저장 방식이 적용된다.</p>

<p>만약에 <code>PlatformData</code>의 저장 방식도
<code>DataSet.SAVE_TYPE_NONE</code>인 경우 기본값 <code>DataSet.SAVE_TYPE_NORMAL</code>이 적용된다.</p>

<a name="doc.StreamLog"></a>
<h3>16. <code>StreamLog</code>를 이용한 송수신 데이터(stream) 저장</h3>

<p><code>PlatformRequest</code>의 <code>StreamLog</code>는
클라이언트로부터 수신받은 데이터(stream)를 특정 위치에 저장하는 역할을 수행한다.</p>

<p>이것은 서버에서 데이터 수신중에 오류가 발생하거나, 수신받은 데이터가 의심스러운 경우
파일로 저장하여 정확한 확인을 위한 것이다.</p>

<p>주의할 점은 <code>StreamLog</code>가 활성화된 경우 메모리를 많이 차지할 수 있으므로,
반드시 필요한 경우에만 사용한다.</p>

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>

  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
	<code>
<font color="#3f7f5f">//&nbsp;HttpServletRequest를&nbsp;이용하여&nbsp;HttpPlatformRequest&nbsp;생성</font><br />
<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request</font><font color="#000000">)</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;수신받은&nbsp;데이터(stream)&nbsp;로그의&nbsp;활성화</font><br />
<font color="#000000">req.setStreamLogEnabled</font><font color="#000000">(</font><font color="#7f0055"><b>true</b></font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#3f7f5f">//&nbsp;수신받은&nbsp;데이터(stream)&nbsp;로그의&nbsp;저장&nbsp;위치</font><br />

<font color="#000000">req.setStreamLogDir</font><font color="#000000">(</font><font color="#2a00ff">&#34;/home/log&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;데이터&nbsp;수신</font><br />
<font color="#3f7f5f">//&nbsp;예외가&nbsp;발생한&nbsp;경우&nbsp;자동적으로&nbsp;로그&nbsp;저장&nbsp;위치에&nbsp;수신받은&nbsp;데이터(stream)가&nbsp;저장됨</font><br />

<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;예외가&nbsp;발생하지&nbsp;않더라도&nbsp;필요한&nbsp;경우&nbsp;강제적으로&nbsp;로그&nbsp;저장</font><br />
<font color="#000000">req.storeStreamLog</font><font color="#000000">()</font><font color="#000000">;</font><br />

<font color="#ffffff"></font><br />
<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font></code>


   </td>
  <!-- end source code -->
   </tr>
</table>
수신받은 데이터(stream) 저장
</div>

<a name="doc.LocalTest"></a>
<h3>17. localhost 테스트</h3>

<p>local PC 상에서 "localhost" 또는 "127.0.0.1"으로 시작하는 URL으로 요청하는 경우 라이센스 파일 없이 동작이 가능하다.</p>

<p>라이센스 파일 없이 동작하기 위해서는 다음과 같이 작성하여야 한다.</p>

<ol>
<li><code>HttpServletRequest</code>를 이용하여 <code>HttpPlatformRequest</code>를 생성한다.</li>
<li><code>HttpServletResponse</code>와 이전 과정에서 생성된 <code>HttpPlatformRequest</code>를 이용하여 <code>HttpPlatformResponse</code>를 생성한다.</li>
<li>local PC 상에서 "localhost" 또는 "127.0.0.1" 으로 시작되는 URL으로 요청한다.</li>
</ol>

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.tx.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.data.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;contentType=</font><font color="#2a00ff">&#34;text/xml;&nbsp;charset=UTF-8&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><br />
<font color="#000000">out.clearBuffer</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;localhost&nbsp;테스트&nbsp;방법</font><br />
<font color="#3f7f5f">//&nbsp;1)&nbsp;HttpServletRequest를&nbsp;이용하여&nbsp;HttpPlatformRequest&nbsp;생성</font><br />
<font color="#3f7f5f">//&nbsp;2)&nbsp;HttpServletResponse와&nbsp;이전&nbsp;과정에서&nbsp;생성된&nbsp;HttpPlatformRequest를&nbsp;이용하여&nbsp;HttpPlatformResponse&nbsp;생성</font><br />
<font color="#3f7f5f">//&nbsp;3)&nbsp;&#34;localhost&#34;&nbsp;또는&nbsp;&#34;127.0.0.1&#34;&nbsp;으로&nbsp;시작되는&nbsp;URL으로&nbsp;요청</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">HttpPlatformRequest&nbsp;req&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformRequest</font><font color="#000000">(</font><font color="#000000">request</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">req.receiveData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">PlatformData&nbsp;data&nbsp;=&nbsp;req.getData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response,&nbsp;req</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">%&gt;</font></code>

   </td>
  <!-- end source code -->
   </tr>
</table>
</div>

<a name="doc.Logging"></a>
<h3>18. X-API의 내부 로그 출력하기</h3>

<p>X-API의 내부 로깅(logging)은 Apache의 Commons Logging을 이용하여 출력한다.
Apache Commons Logging에 대한 자세한 사항은 <a href="http://commons.apache.org/logging/">여기</a>를 참조하기 바란다.
따라서, Apache Commons Logging의 방침에 따라 로깅 설정을 하여 로그를 출력하고,
출력된 로그를 분석하여 개발 또는 운영시에 참조한다.</p>

<p>다음은 <a href="http://logging.apache.org/log4j/">Apache Log4j</a>를 이용하여 X-API의 내부 로그를 파일로 출력하는 예제이다.</p>

<ol>
<li>클래스 경로에 X-API와 같이 Apache Log4j의 jar(log4j-x.x.x.jar)를 복사한다.</li>
<li>log4j.properties를 작성하고, 클래스 경로에 복사한다.</li>
<li>WAS(Web Application Server)를 재구동시킨다.</li>
<li>X-API를 이용하는 서비스를 호출한다.</li>
<li>Apache Log4j에서 설정된 위치에 로그가 파일로 출력되었을 것이다.</li>
</ol>

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>

  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
	<code>
log4j.logger.com.nexacro.xapi.data=DEBUG, file<br />
log4j.logger.com.nexacro.xapi.tx=DEBUG, file<br />
<br />
log4j.appender.file=org.apache.log4j.FileAppender<br />
log4j.appender.file.File=xapi.log<br />
log4j.appender.file.Append=false<br />
log4j.appender.file.layout=org.apache.log4j.PatternLayout<br />
log4j.appender.file.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n<br />
	</code>
   </td>
  <!-- end source code -->
   </tr>
</table>
log4j.properties 예제
</div>

<p>Apache Tomcat 환경인 경우 다음과 같이 설정할 수 있다.

<ol>
<li>Apache Commons Logging의 jar(commons-logging-x.x.x.jar)를 $CATALINA_HOME/common/lib으로 복사한다.</li>
<li>Apache Log4j의 jar(log4j-x.x.x.jar)를 $CATALINA_HOME/common/lib으로 복사한다.</li>
<li>log4j.properties를 작성하고, $CATALINA_HOME/common/classes으로 복사한다.</li>
<li>Apache Tomcat을 재구동시킨다.</li>
<li>X-API를 이용하는 서비스를 호출한다.</li>
<li>Apache Log4j에서 설정된 위치에 로그가 파일로 출력되었을 것이다.</li>
</ol>

<div align="left">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>

  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
	<code>
log4j.rootLogger=INFO, tomcat<br />
log4j.logger.com.nexacro.xapi.tx=DEBUG, xapi<br />
log4j.logger.com.nexacro.xapi.data=DEBUG, xapi<br />
<br />
log4j.appender.stdout=org.apache.log4j.ConsoleAppender<br />
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout<br />
log4j.appender.stdout.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n<br />
<br />
log4j.appender.tomcat=org.apache.log4j.FileAppender<br />
log4j.appender.tomcat.File=${catalina.home}/logs/tomcat.log<br />
log4j.appender.tomcat.Append=false<br />
log4j.appender.tomcat.layout=org.apache.log4j.PatternLayout<br />
log4j.appender.tomcat.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n<br />
<br />
log4j.appender.xapi=org.apache.log4j.FileAppender<br />
log4j.appender.xapi.File=${catalina.home}/logs/xapi.log<br />
log4j.appender.xapi.Append=false<br />
log4j.appender.xapi.layout=org.apache.log4j.PatternLayout<br />
log4j.appender.xapi.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n<br />
	</code>
   </td>
  <!-- end source code -->
   </tr>
</table>
Apache Tomcat의 log4j.properties 예제
</div>

<a name="doc.NullChar"></a>
<h3>19. 데이터에 포함된 null 문자(0x00) 오류</h3>

<p>nexacro platform의 Runtime과 데이터 통신을 수행하는 경우 nexacro platform Runtime과 X-API의 null 문자(0x00) 처리 방식의 차이로 인해
오동작이 발생할 수도 있다. nexacro platform Runtime에서는 null 문자를 문자열의 종료로 인식하지만,
X-API에서는 null 문자를 포함할 수 있다. 따라서, X-API에서 null 문자가 포함된 데이터를
nexacro platform Runtime으로 송신한 경우 nexacro platform Runtime에서는 null 문자까지만 표현하고, 나머지 데이터는 무시될 것이다.

<a name="doc.IllegalStateException"></a>
<h3>20. JSP에서 데이터 전송시의 java.lang.IllegalStateException 예외</h3>

<p>JSP에서 <code>HttpPlatformResponse</code>를 이용하여 데이터 전송시
동작은 성공적으로 수행되지만, <code>java.lang.IllegalStateException</code> 예외가 발생하게 된다.
이것은 Web Application Server 별로 동작이 다르다.</p>

<p>이 예외가 발생하는 원인은 <code>HttpPlatformResponse</code>에서
<code>javax.servlet.http.HttpServletResponse</code>의 <code>OutputStream</code>을 이용하기 때문입니다.
즉, <code>HttpPlatformResponse</code>에서 이미 <code>HttpServletResponse.getOutputStream()</code> 메소드가 호출되었고,
JSP 자체에서도 이를 참조하기 때문에 Web Application Server에서 이 예외를 발생시키는 것으로 예상된다.</p>

<blockquote>
  <table border="thin">
    <tr class="TableSubHeadingColor">
      <th>Web Application Server</th>
      <th>예외 발생 여부</th>
      <th>예외 메시지 (버전에 따라 다를 수 있음)</th>
    </tr>
    <tr class="TableRowColor">
      <td>IBM WebSphere</td>
      <td>발생</td>
      <td>java.lang.IllegalStateException: OutputStream already obtained</td>
    </tr>
    <tr class="TableRowColor">
      <td>Oracle WebLogic</td>
      <td>무시</td>
      <td>&nbsp;</td>
    </tr>
    <tr class="TableRowColor">
      <td>Tmax JEUS</td>
      <td>무시</td>
      <td>&nbsp;</td>
    </tr>
    <tr class="TableRowColor">
      <td>Apache Tomcat</td>
      <td>발생</td>
      <td>java.lang.IllegalStateException: getOutputStream() has already been called for this response</td>
    </tr>
  </table>
</blockquote>

<p>XML 또는 CSV 형식으로 데이터를 전송하는 경우에는
<code>javax.servlet.http.HttpServletResponse</code>의 <code>Writer</code>를 이용하기 때문에
위와 같은 예외가 발생하지 않는다. 즉, Binary 형식으로 데이터를 전송하는 경우에만 예외가 발생한다.

<p>이 예외에 대한 대처 방안은 다음과 같다.</p>

<ul>
<li>JSP 수행에는 지장이 없으므로 무시한다. 테스트 장비에서는 가능할 것이다.</li>
<li>Binary 형식으로 전송하는 경우에만 예외가 발생하므로, XML 또는 CSV 형식으로만 전송한다.</li>
<li>JSP 상단에서 <code>out.clear()</code>와 <code>out = pageContext.pushBody()</code>를 호출하여 예외 발생을 방지한다.</li>
<li>근본적인 원인은 JSP에서 Binary 형식으로 전송하기 때문이므로, JSP 대신에 Servlet으로 작성한다.</li>
</ul>

<div align="left">
<table border="2" cellpadding="3" cellspacing="0" bgcolor="#ffffff" class="java">
   <tr>
  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.tx.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#000000">&lt;%</font><font color="#646464">@&nbsp;</font><font color="#000000">page&nbsp;</font><font color="#7f0055"><b>import</b></font><font color="#000000">=</font><font color="#2a00ff">&#34;com.nexacro.xapi.data.*&#34;&nbsp;</font><font color="#000000">%&gt;</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">&lt;%</font><br />
<font color="#000000">out.clear</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">out&nbsp;=&nbsp;pageContext.pushBody</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#ffffff"></font><br />
<font color="#3f7f5f">//&nbsp;...</font><br />
<font color="#ffffff"></font><br />
<font color="#000000">HttpPlatformResponse&nbsp;res&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">HttpPlatformResponse</font><font color="#000000">(</font><font color="#000000">response,&nbsp;PlatformType.CONTENT_TYPE_BINARY</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">res.setData</font><font color="#000000">(</font><font color="#000000">data</font><font color="#000000">)</font><font color="#000000">;</font><br />
<font color="#000000">res.sendData</font><font color="#000000">()</font><font color="#000000">;</font><br />
<font color="#000000">%&gt;</font></code>

   </td>
  <!-- end source code -->
   </tr>
</table>
</div>
<P>

<P>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/nexacro/xapi/data/datatype/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/nexacro/xapi/tx/impl/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2000-2014 TOBESOFT CO., LTD.
</BODY>
</HTML>
